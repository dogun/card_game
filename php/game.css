:root { --bg:#0b0e11; --fg:#e8e8e8; --panel:#10151c; --muted:#a0a0a0; --accent:#4ea1ff; --danger:#ff6161; }
*{box-sizing:border-box}
html,body{
  height:100%;
  overflow: hidden;           /* 关键：对根元素生效 */
  overscroll-behavior: none;
	}
body{margin:0;color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;background:#000}
.stage{
  position:relative; width:100%; height:100vh; background:#000 center/cover no-repeat;
  display:grid; grid-template-rows: 30% 40% 30%;
}
.topbar, .bottombar{display:grid; grid-template-columns: 25% 50% 25%; align-items:center}
.points{padding:8px; margin:8px}
.points .big{font-size:20px; font-weight:700}
.enemy-piles, .my-piles{position:absolute; display:flex; justify-content:flex-end; gap:8px; padding:8px; right: 10px;}
.pile{ padding:6px 10px; }

.hand{position:relative; height:210;}
.hand-top{position:absolute; left: 50%; display:flex; top: -100px; align-items:flex-end; justify-content:center}
.hand-bottom{position:absolute; left: 50%; top: 110%; display:flex; align-items:flex-start; justify-content:center}

.line-top{position:absolute; left: 0%; width: 100%; top: 15%; display:block; grid-template-columns: 1fr auto 1fr; align-items:center; height: 207px;}
.line{position:absolute; left: 0%; width: 100%; top: 38%; display:block; grid-template-columns: 1fr auto 1fr; align-items:center; height: 24%;}
.line-bottom{position:absolute; left: 0%; bottom: 15%; width: 100%; display:block; grid-template-columns: 1fr auto 1fr; align-items:center; height: 207px;}

.zone-cards{width: 100%; height: 100%; display:flex; align-items:center; justify-content:center;  }

.hq{padding:8px 10px; border:1px solid rgba(255,255,255,.2); border-radius:8px; background:rgba(0,0,0,.35)}
.center{display:flex; flex-direction:column; align-items:center; gap:8px}
.end-turn {
  position: absolute;
  right: 50px;            /* 距右侧边距 */
  top: 50%;               /* 垂直居中该行 */
  transform: translateY(-50%);
  z-index: 10;
}
.endturn{padding:8px 12px; border-radius:8px; border:1px solid rgba(255,255,255,.2); background:#16202c; color:#fff; align: right; font-size:24px; }
.endturn:hover{background:#1d2c3d}
.zoom{position:fixed; inset:0; background:rgba(0,0,0,.7); display:flex; align-items:center; justify-content:center}
.zoom img{max-width:min(85vw,480px); max-height:85vh; border-radius:12px; box-shadow:0 6px 24px rgba(0,0,0,.6)}
.hidden{display:none !important;}
.modal{position:fixed; inset:0; background:rgba(0,0,0,.6); display:flex; align-items:center; justify-content:center}
.modal-body{background:#141a22; border:1px solid rgba(255,255,255,.1); border-radius:12px; padding:16px 20px; color:#fff}
.modal .row{display:flex; gap:12px; justify-content:center; margin-top:8px}

@font-face {
  font-family: 'RB';
  src: url('/font/rb.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

.card{
  position:absolute;
  overflow:hidden; cursor:pointer;
  display:flex; align-items:center; justify-content:center; color:#ddd; user-select:none;
}
.card img{width:100%; height:100%; object-fit:cover; }
.card.back{ width:145px; height:203px; background:#222 url('/pic/back.png') center/cover no-repeat}

.card-view {
  position: relative;
  display: inline-block;
  width: var(--card-width, 145px);      /* 支持通过 --card-width 控制大小 */
  aspect-ratio: 5 / 7;                /* 常见卡牌宽高比，按需调整 */
  overflow: hidden;

  /* 让子元素可以用 cqw 根据容器宽度缩放 */
  container-type: inline-size;

  /* 回退：基于 --card-width 推导字体尺寸（老浏览器用这条） */
  font-size: calc(var(--card-width, 145px) * 0.01);
  /* 现代：基于容器宽度 12% 缩放字体（新浏览器会用这条覆盖） */
  font-size: clamp(8px, 10cqw, 48px);
}

.card-view .card-art {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* 通用数值徽标：尺寸采用 em，随 font-size 等比缩放；位置用百分比，随容器尺寸等比移动 */
.card-view .stat {
  position: absolute;
  display: grid;
  place-items: center;
  width: 1em;
  height: 1em;
  font: 800 0.32em/1 "RB", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: #fff;
  text-shadow: 0 2px 2px rgba(0,0,0,0.5);
  user-select: none;
}

/* 位置：用百分比保证等比缩放时位置正确 */
.card-view .atk { left: 20.8%; bottom: 28%; }
.card-view .def { right: 20.8%; bottom: 28%; }
.card-view .headquarters { left: 46%; bottom: 28%; }

/* 自定义拖拽预览（ghost）：完全不透明，且不影响指针事件 */
.drag-ghost {
  position: absolute;
  left: 0; top: 0;
  pointer-events: none;
  z-index: 10000;
  opacity: 1;              /* 关键：不透明 */
}

/* 拖拽中的原始元素：不再透明，仅轻微放大（可选） */
.dragging {
  opacity: 0;
  transform: scale(1.03);
  transition: transform 120ms ease;
  z-index: 1000;
}

/* 放置区高亮（保持不变） */
.droppable-over {
  outline: 2px dashed rgba(255,255,255,0.5);
  outline-offset: 4px;
}
